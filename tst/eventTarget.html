<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>Evento Tests</title>

    <script src="../src/eventTarget.js" type="text/javascript"></script>

    <style type="text/css">
        .warningMessage {
            border: 10px solid red;
            padding: 10px;
        }
    </style>

</head>
<body>

    <h1>Evento Tests</h1>

    <noscript>
        <p class="warningMessage">JavaScript not supported in this browser</p>
    </noscript>

    <script type="text/javascript">
        if (typeof LIB_addEventListener !== 'function') {
            document.write('<p class="warningMessage">LIB_addEventListener is not a function</p>');
        }
        if (typeof LIB_removeEventListener !== 'function') {
            document.write('<p class="warningMessage">LIB_removeEventListener is not a function</p>');
        }
    </script>


    <div id="simple_ex" class="example">

        <h2>Function.prototype.apply preserves arguments.length</h2>

        <p>Evento depends on Function.prototype.apply preserving
        arguments.length from caller to callee. This is a feature of apply
        that is not commonly depended upon and perhaps some browser
        somewhere gets this wrong. Test it to be safe.</p>

        <script type="text/javascript">
            function applyArgumentsCheckAlert() {
                alert(arguments.length);
            }
            function applyArgumentsCheck() {
                applyArgumentsCheckAlert.apply(null, arguments);
            }
        </script>

        <p><a href="#applyArgumentsCheck" onclick="applyArgumentsCheck('a', 'b');return false;">click here and alert should show "2"</a></p>
        <p><a href="#applyArgumentsCheck" onclick="applyArgumentsCheck('a', 'b', 'c');return false;">click here and alert should show "3"</a></p>

    </div>


    <div id="simple_ex" class="example">

      <h2>Simple</h2>

      <ol>
          <li>Mouse over the grey box and see the background become blue.</li>
          <li>Mouse out of the blue box and see the background become grey again.</li>
          <li> Click <a href="#" onclick="LIB_removeEventListener(document.getElementById('one'), 'mouseover', simpleOver);LIB_removeEventListener(document.getElementById('one'), 'mouseout', simpleOut);return false;">here</a> to remove the mouseover and mouseout listeners.</li>
          <li>Mouse over and out of the grey box and see the background stay grey.</li>
      </ol>

      <div id="one" style="width:300px;height:100px;background:#444;margin-left:auto;margin-right:auto;"></div>

      <script type="text/javascript">
          function simpleOver(e) {
              document.getElementById('one').style.background = "#00f";
          }
          function simpleOut(e) {
              document.getElementById('one').style.background = "#444";
          }
          LIB_addEventListener(document.getElementById('one'), 'mouseover', simpleOver);
          LIB_addEventListener(document.getElementById('one'), 'mouseout', simpleOut);
      </script>

    </div>


    <div id="passed_ex" class="example">

        <h2>Event Passed</h2>

        <p>Is an event object passed to the handler. Click the grey box. The alert should say "click" which is the event type read from the event object passed to the handler.</p>

        <div id="passed" style="width:300px;height:100px;background:#444;position:relative;margin-left:auto;margin-right:auto;">
        </div>

        <script type="text/javascript">
            function passedHandler(evt) {
                alert(evt.type);
            }
            LIB_addEventListener(document.getElementById('passed'), 'click', passedHandler);
        </script>
    </div>


    <div id="purge_ex" class="example">

        <h2>Purge</h2>

        <p>The grey boxes have DOM2 and legacy listeners. Click <a href="#" onclick="LIB_purgeEventListeners(document.getElementById('purge'));return false;">Go!</a> to remove the all listeners added through evento API.</p>

        <div id="purge" style="width:300px;height:100px;background:#444;position:relative;margin-left:auto;margin-right:auto;">
            <div id="purge2" style="width:100px;height:50px;background:#555;top:25px;right:100px;position:absolute;">

            </div>
        </div>

        <script type="text/javascript">
            var purgeObj = {
                light: "#0ff",
                dark: "#444",
                simple: function(e) {
                    document.getElementById('purge').style.background = this.light;
                },
                simple2: function(e) {
                    document.getElementById('purge').style.background = this.dark;
                },
                simple3: function(e) {
                    document.getElementById('purge2').style.background = "#ff0";
                },
                simple4: function(e) {
                    document.getElementById('purge2').style.background = "#555";
                }
            };

            LIB_addEventListener(document.getElementById('purge' ), 'mouseover', purgeObj.simple , purgeObj);
            LIB_addEventListener(document.getElementById('purge' ), 'mouseout' , purgeObj.simple2, purgeObj);
            LIB_addEventListener(document.getElementById('purge2'), 'mouseover', purgeObj.simple3, purgeObj);
            LIB_addEventListener(document.getElementById('purge2'), 'mouseout' , purgeObj.simple4, purgeObj);
        </script>
    </div>


</body>
</html>
